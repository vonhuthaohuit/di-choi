<!DOCTYPE html>
<html>
<head>
    <title>Simple Test - Google Apps Script</title>
</head>
<body>
    <h1>Simple Test - Google Apps Script Connection</h1>
    
    <h2>1. Test Basic Connection</h2>
    <button onclick="testBasic()">Test Basic GET</button>
    <div id="basic-result"></div>
    
    <h2>2. Test with Form Data</h2>
    <button onclick="testWithForm()">Test Form Data</button>
    <div id="form-result"></div>
    
    <h2>3. Test with POST</h2>
    <button onclick="testPOST()">Test POST Request</button>
    <div id="post-result"></div>

    <script>
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyUm6yNoO8uoXfqJju52OkuGyTPBHPQnBfbsQE8CIPR106WA7EqpA3E5FgNjq1uxvDx/exec';

        function testBasic() {
            const resultDiv = document.getElementById('basic-result');
            resultDiv.innerHTML = 'Testing basic connection...';
            
            fetch(GOOGLE_SCRIPT_URL)
                .then(response => {
                    console.log('Response status:', response.status);
                    console.log('Response headers:', response.headers);
                    return response.text();
                })
                .then(data => {
                    console.log('Response data:', data);
                    resultDiv.innerHTML = '<p style="color: green;">✅ Basic connection successful!</p><p>Response: ' + data + '</p>';
                })
                .catch(error => {
                    console.error('Error:', error);
                    resultDiv.innerHTML = '<p style="color: red;">❌ Basic connection failed!</p><p>Error: ' + error.message + '</p>';
                });
        }

        function testWithForm() {
            const resultDiv = document.getElementById('form-result');
            resultDiv.innerHTML = 'Testing with form data...';
            
            const testData = {
                type: 'confirm',
                timestamp: new Date().toISOString(),
                name: 'Test User',
                phone: '0123456789',
                email: 'test@example.com',
                message: 'Test message'
            };
            
            const url = GOOGLE_SCRIPT_URL + '?callback=testCallback&data=' + encodeURIComponent(JSON.stringify(testData));
            console.log('Testing URL:', url);
            
            const script = document.createElement('script');
            script.src = url;
            
            window.testCallback = function(response) {
                console.log('Callback response:', response);
                if (response && response.result === 'success') {
                    resultDiv.innerHTML = '<p style="color: green;">✅ Form test successful!</p>';
                } else {
                    resultDiv.innerHTML = '<p style="color: red;">❌ Form test failed!</p><p>Response: ' + JSON.stringify(response) + '</p>';
                }
                delete window.testCallback;
                document.head.removeChild(script);
            };
            
            script.onerror = function(error) {
                console.error('Script error:', error);
                resultDiv.innerHTML = '<p style="color: red;">❌ Script loading failed!</p>';
                delete window.testCallback;
                document.head.removeChild(script);
            };
            
            document.head.appendChild(script);
        }

        function testPOST() {
            const resultDiv = document.getElementById('post-result');
            resultDiv.innerHTML = 'Testing POST request...';
            
            const testData = {
                type: 'confirm',
                timestamp: new Date().toISOString(),
                name: 'Test User',
                phone: '0123456789',
                email: 'test@example.com',
                message: 'Test POST message'
            };
            
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(testData)
            })
            .then(response => {
                console.log('POST response:', response);
                resultDiv.innerHTML = '<p style="color: green;">✅ POST request sent (no-cors mode)</p>';
            })
            .catch(error => {
                console.error('POST error:', error);
                resultDiv.innerHTML = '<p style="color: red;">❌ POST request failed!</p><p>Error: ' + error.message + '</p>';
            });
        }
    </script>
</body>
</html> 