@extends('layouts.app')

@section('content')
<header class="text-center mb-5">
    <h1 class="main-title">üåäüì¢ TH√îNG B√ÅO KH·∫®N C·∫§P T·ª™ GI√ÅO CH·ª¶</h1>
    <p class="subtitle">K√≠nh g·ª≠i to√†n th·ªÉ ch∆∞ v·ªã member thu·ªôc Gi√°o ph√°i Ng∆∞ng Tr√¨nh B√†y!</p>
</header>

<div class="content-card">
    <div class="mb-4">
        <h2 class="section-title">
            <i class="fas fa-graduation-cap"></i>
            L·ªùi M·ªü ƒê·∫ßu
        </h2>
        <p>Sau 4 nƒÉm tu luy·ªán kh·ªï c·ª±c t·∫°i h·ªçc vi·ªán IT ch√≠nh ƒë·∫°o ‚Äì n∆°i ƒë√£ r√®n luy·ªán cho ch√∫ng ta kh·∫£ nƒÉng nh√¨n bug l√† bi·∫øt l·ªói, nh√¨n deadline l√† bi·∫øt ch·∫°y ‚Äì th√¨ cu·ªëi c√πng, ch√∫ng ta c≈©ng ƒë√£ ƒë·∫Øc ƒë·∫°o, r·ªùi kh·ªèi xi·ªÅng x√≠ch ƒë·ªì √°n v√† b∆∞·ªõc v√†o xi·ªÅng x√≠ch customer, trƒ©, deadline, ....üßë‚Äçüíªüéì</p>
    </div>

    <div class="highlight-box">
        <h3 style="margin-bottom: 15px;">üéØ Nh√¢n d·ªãp tr·ªçng ƒë·∫°i n√†y, gi√°o ch·ªß quy·∫øt ƒë·ªãnh tri·ªáu t·∫≠p to√†n b·ªô gi√°o ch√∫ng c√πng nhau th·ª±c hi·ªán m·ªôt chuy·∫øn h√†nh h∆∞∆°ng v·ªÅ mi·ªÅn bi·ªÉn V≈©ng T√†u ‚Äì n∆°i gi√≥ m√°t, c√°t √™m, n∆∞·ªõc m·∫∑n v√† l√≤ng ng∆∞·ªùi th√¨ ƒë·∫≠m ƒë√† üòé</h3>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <div class="info-item">
                <h4><i class="fas fa-calendar-alt"></i> Th·ªùi gian</h4>
                <p>Th√°ng 10/2025 ‚Äì m√πa ƒë·∫πp nh·∫•t ƒë·ªÉ t·∫°m bi·ªát thanh xu√¢n</p>
            </div>
        </div>
        <div class="col-md-6">
            <div class="info-item">
                <h4><i class="fas fa-map-marker-alt"></i> ƒê·ªãa ƒëi·ªÉm</h4>
                <p>V≈®NG T√ÄU ‚Äì n∆°i gi√°o ph√°i ta s·∫Ω "deploy" nh·ªØng tr·∫≠n c∆∞·ªùi, "host" nh·ªØng cu·ªôc vui v√† "log" l·∫°i k·ª∑ ni·ªám ƒë·∫πp nh·∫•t th·ªùi sinh vi√™n</p>
            </div>
        </div>
    </div>

    <div class="mb-4">
        <h2 class="section-title">
            <i class="fas fa-bullseye"></i>
            M·ª•c ti√™u chuy·∫øn ƒëi
        </h2>
        <ul class="goals-list">
            <li><i class="fas fa-users"></i> Reconnect t√¨nh huynh ƒë·ªá</li>
            <li><i class="fas fa-spa"></i> Release stress h·∫≠u t·ªët nghi·ªáp</li>
            <li><i class="fas fa-camera"></i> Update album s·ªëng ·∫£o</li>
            <li><i class="fas fa-heart"></i> Fix bug t√¢m tr·∫°ng sau nh·ªØng ng√†y deadline d·ªìn d·∫≠p</li>
        </ul>
    </div>

    <div class="warning-text">
        ‚ö†Ô∏è CH√ö √ù: Chuy·∫øn ƒëi n√†y kh√¥ng ph·∫£i l√† m·ªôt chuy·∫øn ƒëi b√¨nh th∆∞·ªùng. ƒê√¢y l√† m·ªôt nghi l·ªÖ thi√™ng li√™ng c·ªßa gi√°o ph√°i. ƒê·ª©a n√†o kh√¥ng ƒëi th√¨ hi·ªÉu r·ªìi ƒë√≥ nay t√≠nh gi√°o ch·ªß h∆°i l√≥ng.
    </div>

    <div class="mb-4">
        <h2 class="section-title">
            <i class="fas fa-comments"></i>
            Th√¥ng B√°o Quan Tr·ªçng
        </h2>
        <p>üì¢ T·∫•t c·∫£ member vui l√≤ng comment x√°c nh·∫≠n b√™n d∆∞·ªõi, g√≥p √Ω th√™m v·ªÅ th·ªùi gian ‚Äì gi√°o ch·ªß s·∫Ω compile l·∫°i l·ªãch tr√¨nh v√† th√¥ng b√°o sau. (Ch·ªët lu√¥n ng√†y v√† gi·ªù ƒëi ƒë·ªÉ m·∫•y ƒë·ªá chu·∫©n b·ªã trong v√≤ng 2 th√°ng)</p>
    </div>

    <div class="cta-section">
        <h3 style="margin-bottom: 20px;">üöÄ H·ª°i c√°c chi·∫øn binh b√†n ph√≠m‚Ä¶ ƒë√£ ƒë·∫øn l√∫c c√πng nhau t·∫°o ra d√≤ng code cu·ªëi c√πng c·ªßa thanh xu√¢n!</h3>
        
        <button class="cta-button" data-bs-toggle="modal" data-bs-target="#confirmModal">
            <i class="fas fa-thumbs-up"></i> X√°c nh·∫≠n tham gia
        </button>
        <button class="cta-button" data-bs-toggle="modal" data-bs-target="#suggestModal">
            <i class="fas fa-lightbulb"></i> G√≥p √Ω th·ªùi gian
        </button>
        
        {{-- <div style="margin-top: 20px;">
            <a href="https://docs.google.com/spreadsheets/d/1k6FC5cA7aZMtxfMK5347VW8PkJN7tS5pAKRmwrIulKo/edit?usp=sharing" target="_blank" class="cta-button">
                <i class="fas fa-table"></i> Xem danh s√°ch tham gia
            </a>
        </div> --}}
    </div>
</div>

<!-- Modal X√°c nh·∫≠n tham gia -->
<div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-thumbs-up text-primary"></i> 
                    X√°c nh·∫≠n tham gia
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="confirmForm">
                    <div class="mb-3">
                        <label for="confirmName" class="form-label">H·ªç v√† t√™n *</label>
                        <input type="text" class="form-control" id="confirmName" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="confirmPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i *</label>
                        <input type="tel" class="form-control" id="confirmPhone" name="phone" required>
                    </div>
                    <div class="mb-3">
                        <label for="confirmEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="confirmEmail" name="email">
                    </div>
                    <div class="mb-3">
                        <label for="confirmMessage" class="form-label">L·ªùi nh·∫Øn (n·∫øu c√≥)</label>
                        <textarea class="form-control" id="confirmMessage" name="message" rows="3" placeholder="Ghi ch√∫ th√™m n·∫øu c·∫ßn..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-custom w-100">
                        <span class="btn-text">X√°c nh·∫≠n tham gia</span>
                        <span class="spinner-border spinner-border-sm ms-2 d-none" role="status"></span>
                    </button>
                </form>
                <div class="alert alert-custom-success mt-3 d-none" id="confirmSuccess">
                    ‚úÖ ƒê√£ x√°c nh·∫≠n tham gia th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ ƒëƒÉng k√Ω.
                </div>
                <div class="alert alert-custom-error mt-3 d-none" id="confirmError">
                    ‚ùå <span class="error-message">C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau.</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal G√≥p √Ω th·ªùi gian -->
<div class="modal fade" id="suggestModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-lightbulb text-warning"></i> 
                    G√≥p √Ω th·ªùi gian
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="suggestForm">
                    <div class="mb-3">
                        <label for="suggestName" class="form-label">H·ªç v√† t√™n *</label>
                        <input type="text" class="form-control" id="suggestName" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="suggestPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i *</label>
                        <input type="tel" class="form-control" id="suggestPhone" name="phone" required>
                    </div>
                    <div class="mb-3">
                        <label for="suggestDate" class="form-label">Ng√†y ƒë·ªÅ xu·∫•t *</label>
                        <input type="date" class="form-control" id="suggestDate" name="suggested_date" required>
                    </div>
                    <div class="mb-3">
                        <label for="suggestDuration" class="form-label">Th·ªùi gian ƒëi</label>
                        <select class="form-control" id="suggestDuration" name="duration">
                            <option value="1">1 ng√†y</option>
                            <option value="2" selected>2 ng√†y 1 ƒë√™m</option>
                            <option value="3">3 ng√†y 2 ƒë√™m</option>
                            <option value="4">4 ng√†y 3 ƒë√™m</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="suggestActivities" class="form-label">Ho·∫°t ƒë·ªông mong mu·ªën</label>
                        <textarea class="form-control" id="suggestActivities" name="activities" rows="3" placeholder="V√≠ d·ª•: T·∫Øm bi·ªÉn, ƒÇn h·∫£i s·∫£n, Ch·ª•p ·∫£nh, Karaoke..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="suggestBudget" class="form-label">Ng√¢n s√°ch d·ª± ki·∫øn (VNƒê)</label>
                        <input type="number" class="form-control" id="suggestBudget" name="budget" placeholder="V√≠ d·ª•: 500000">
                    </div>
                    <button type="submit" class="btn btn-custom w-100">
                        <span class="btn-text">G·ª≠i g√≥p √Ω</span>
                        <span class="spinner-border spinner-border-sm ms-2 d-none" role="status"></span>
                    </button>
                </form>
                <div class="alert alert-custom-success mt-3 d-none" id="suggestSuccess">
                    ‚úÖ ƒê√£ g·ª≠i g√≥p √Ω th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ ƒë√≥ng g√≥p √Ω ki·∫øn.
                </div>
                <div class="alert alert-custom-error mt-3 d-none" id="suggestError">
                    ‚ùå <span class="error-message">C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau.</span>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="text-center text-white mt-5">
    <p>¬© 2025 Gi√°o ph√°i Ng∆∞ng Tr√¨nh B√†y - H√†nh h∆∞∆°ng V≈©ng T√†u</p>
    <p>ƒê∆∞·ª£c t·∫°o b·ªüi <a href="https://www.facebook.com/vonhuthao180903" target="_blank">V√µ Nh·ª±t H√†o</a></p>
</footer>
@endsection

@push('scripts')
<script>
$(document).ready(function() {
    // X·ª≠ l√Ω form x√°c nh·∫≠n tham gia
    $('#confirmForm').on('submit', function(e) {
        e.preventDefault();
        
        const form = $(this);
        const submitBtn = form.find('button[type="submit"]');
        const btnText = submitBtn.find('.btn-text');
        const spinner = submitBtn.find('.spinner-border');
        const successAlert = $('#confirmSuccess');
        const errorAlert = $('#confirmError');
        
        // Reset alerts
        successAlert.addClass('d-none');
        errorAlert.addClass('d-none');
        
        // Show loading
        submitBtn.prop('disabled', true);
        btnText.text('ƒêang g·ª≠i...');
        spinner.removeClass('d-none');
        
        // Submit form
        $.ajax({
            url: '{{ route("trip.confirm") }}',
            method: 'POST',
            data: form.serialize(),
            success: function(response) {
                if (response.success) {
                    successAlert.removeClass('d-none');
                    form[0].reset();
                    
                    // Auto close modal after 2 seconds
                    setTimeout(() => {
                        $('#confirmModal').modal('hide');
                    }, 2000);
                } else {
                    throw new Error(response.message || 'C√≥ l·ªói x·∫£y ra');
                }
            },
            error: function(xhr) {
                let message = 'C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau.';
                
                if (xhr.responseJSON && xhr.responseJSON.message) {
                    message = xhr.responseJSON.message;
                } else if (xhr.responseJSON && xhr.responseJSON.errors) {
                    const errors = Object.values(xhr.responseJSON.errors).flat();
                    message = errors.join('<br>');
                }
                
                errorAlert.find('.error-message').html(message);
                errorAlert.removeClass('d-none');
            },
            complete: function() {
                // Hide loading
                submitBtn.prop('disabled', false);
                btnText.text('X√°c nh·∫≠n tham gia');
                spinner.addClass('d-none');
            }
        });
    });
    
    // X·ª≠ l√Ω form g√≥p √Ω th·ªùi gian
    $('#suggestForm').on('submit', function(e) {
        e.preventDefault();
        
        const form = $(this);
        const submitBtn = form.find('button[type="submit"]');
        const btnText = submitBtn.find('.btn-text');
        const spinner = submitBtn.find('.spinner-border');
        const successAlert = $('#suggestSuccess');
        const errorAlert = $('#suggestError');
        
        // Reset alerts
        successAlert.addClass('d-none');
        errorAlert.addClass('d-none');
        
        // Show loading
        submitBtn.prop('disabled', true);
        btnText.text('ƒêang g·ª≠i...');
        spinner.removeClass('d-none');
        
        // Submit form
        $.ajax({
            url: '{{ route("trip.suggest") }}',
            method: 'POST',
            data: form.serialize(),
            success: function(response) {
                if (response.success) {
                    successAlert.removeClass('d-none');
                    form[0].reset();
                    
                    // Auto close modal after 2 seconds
                    setTimeout(() => {
                        $('#suggestModal').modal('hide');
                    }, 2000);
                } else {
                    throw new Error(response.message || 'C√≥ l·ªói x·∫£y ra');
                }
            },
            error: function(xhr) {
                let message = 'C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau.';
                
                if (xhr.responseJSON && xhr.responseJSON.message) {
                    message = xhr.responseJSON.message;
                } else if (xhr.responseJSON && xhr.responseJSON.errors) {
                    const errors = Object.values(xhr.responseJSON.errors).flat();
                    message = errors.join('<br>');
                }
                
                errorAlert.find('.error-message').html(message);
                errorAlert.removeClass('d-none');
            },
            complete: function() {
                // Hide loading
                submitBtn.prop('disabled', false);
                btnText.text('G·ª≠i g√≥p √Ω');
                spinner.addClass('d-none');
            }
        });
    });
    
    // Reset form khi ƒë√≥ng modal
    $('.modal').on('hidden.bs.modal', function() {
        $(this).find('form')[0].reset();
        $(this).find('.alert').addClass('d-none');
        $(this).find('button[type="submit"]').prop('disabled', false);
        $(this).find('.btn-text').text($(this).find('.btn-text').data('original-text') || 'G·ª≠i');
        $(this).find('.spinner-border').addClass('d-none');
    });
});
</script>
@endpush 